// Import the necessary Firebase modules
import { initializeApp } from 'firebase/app';
import { getFirestore } from 'firebase/firestore';

// Firebase configuration using environment variables
const firebaseConfig = {
  apiKey: import.meta.env.VITE_FIREBASE_API_KEY,
  authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,
  databaseURL: import.meta.env.VITE_FIREBASE_DATABASE_URL,
  projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,
  storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,
  messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,
  appId: import.meta.env.VITE_FIREBASE_APP_ID,
  measurementId: import.meta.env.VITE_FIREBASE_MEASUREMENT_ID
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Access the Firestore collection
const productsRef = db.collection("cards");

productsRef.get().then((snapshot) => {
  const firestoreDataContainer = document.getElementById("firestore-data");

  snapshot.docs.forEach((doc) => {
    const product = doc.data();
    console.log(product); // Log the data to the console

    // Create a new card for each product
    const productElement = `
      <div class="card">
        <a href='https://postimages.org/' target='_blank'>
          <img src='https://i.postimg.cc/Z5pxfYKf/0d289d95-38e7-47e9-a803-59d0a9399730.jpg' border='0' alt='0d289d95-38e7-47e9-a803-59d0a9399730'/>
        </a>    
        <p class="dic-code">1234-5678-ABCD</p>
        <div class="details">
          <h3>${product.title}</h3>
          <p>Price: $${product.description}</p>
        </div>
        <div class="button-group">
          <button>View Details</button>
          <button>Download</button>
        </div>
      </div>
    `;

    // Append the card to the container
    firestoreDataContainer.innerHTML += productElement;
  });
}).catch((error) => {
  console.log("Error getting documents: ", error);
});
